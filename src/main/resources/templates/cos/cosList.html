<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/default2}">
<th:block layout:fragment="customTitle">
	<title th:text="${title}"></title>
</th:block>
<th:block layout:fragment="contentsTitle">
	<h2>코스 조회 및 수정</h2>
</th:block>
<th:block layout:fragment="customContents">
	<link rel="stylesheet" type="text/css" th:href="@{/js/datatables/buttons.dataTables.min.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/js/datatables/select.bootstrap4.min.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/js/datatables/fixedColumns.bootstrap4.min.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/css/plugins/KmyCss/addCssKmy.css}">
	<div id="khtour">
		<!-- **********************************  Start ContentsWrap  ********************************** -->
		<div class="row">
			<div class="col-lg-12">
				<div class="card">
					<div class="card-body">
					<form th:action="@{/cos/cosList}" method="get">
						<div class="input-group mb-3">
							<select class="custom-select col-3"  name="searchKey">
								<option value="">:: 선택 ::</option>
								<option value="cosCode">코스코드</option>
								<option value="memberId">등록아이디</option>
								<option value="cosArea1">지역</option>
								<option value="themeCategory">카테고리</option>
								<option value="cosName">코스명</option>
							</select>
							<input type="text" class="form-control" placeholder="검색어를 입력하세요." name="searchValue">
							<button class="btn btn-outline-primary" type="submit">검색</button>
						</div>
					</form>
					<div class="table-responsive">
						<table id="table-selected" class="table table-striped table-bordered">
							<thead style="text-align: center;">
								<tr>
									<th>코스코드</th>
									<th>등록아이디</th>
									<th>지역</th>
									<th>카테고리</th>
									<th>코스명</th>
									<th>코스</th>
									<th>코스설명</th>
									<th>공개여부</th>
									<th>공유여부</th>
									<th>수정/삭제</th>
								</tr>
							</thead>
							<tbody class="text-center">
								<tr th:if="${not #lists.isEmpty(cosList)}" th:each="l:${cosList}">
									<td th:text="${l.cosCode}"></td>
									<td th:text="${l.memberId}"></td>
									<td th:text="|${l.cosArea1}${l.cosArea2}|"></td>
									<td th:text="${l.themeCategory}"></td>
									<td th:text="${l.cosName}"></td>
									<td th:text="|${l.musCode1}-${l.musCode2}-${l.musCode3}-${l.musCode4}-${l.musCode5}|"></td>
									<td th:text="${l.cosRegist}"></td>
									<td th:text="${l.cosOpen}"></td>
									<td th:text="${l.cosShare}"></td>
									<td>
										<a class="btn btn-primary btn-icon btn-sm mb-1 mr-2 mb-1" th:href="@{/cos/cosModify(cosCode=${l.cosCode})}">
											<i class="la la-edit"></i>
										</a>
										<button class="btn btn-danger btn-icon btn-sm mb-1" id="swal-delete-cos" th:data-cosCd="${l.cosCode}">
											<i class="fa fa-trash-o"></i>
										</button>
									</td>
								</tr>
							</tbody>
							<tfoot style="text-align: center;">
								<tr>
									<th>코스코드</th>
									<th>등록아이디</th>
									<th>지역</th>
									<th>카테고리</th>
									<th>코스명</th>
									<th>코스</th>
									<th>코스설명</th>
									<th>공개여부</th>
									<th>공유여부</th>
									<th>수정/삭제</th>
								</tr>
							</tfoot>
						</table>
					</div>
					</div>
				</div>
			</div>
		</div>

		<!-- **********************************  End ContentsWrap  ********************************** -->
	</div>
</th:block>
<th:block layout:fragment="customBodyScript">
<script>
		$(function(){
			$(document).on('click','#swal-delete-cos',function(){
				var cosCd = $(this).attr('data-cosCd');
			      const swalWithBootstrapButtons = swal.mixin({
			          confirmButtonClass: 'btn btn-success',
			          cancelButtonClass: 'btn btn-danger',
			          buttonsStyling: false,
			        });

			        swalWithBootstrapButtons({
			          title: '정말 삭제 하시겠습니까?',
			          text: "삭제 클릭시 해당 정보는 복구 할 수 없습니다.",
			          type: 'warning',
			          showCancelButton: true,
			          confirmButtonText: '네',
			          cancelButtonText: '아니오',
			          reverseButtons: false
			        }).then((result) => {
			          if (result.value) {
			            swalWithBootstrapButtons(
			              '삭제완료',
			              '삭제되었습니다.',
			              'success'
			            )
			            location.href = '/cos/cosRemove?cosCode=' + cosCd;
			          } else if (
			            // Read more about handling dismissals
			            result.dismiss === swal.DismissReason.cancel
			          ) {
			            swalWithBootstrapButtons(
			              '취소',
			              '삭제가 취소 되었습니다.',
			              'error'
			            )
			          }
			        });	
			});
			
		});
	</script>
	<!-- delbtn -->
	<script th:src="@{/js/sweetalert2/sweetalert2.min.js}" aria-hidden="true"></script>
	<script th:src="@{/js/sweetalert2/sweetalert2-custom.js}"aria-hidden="true"></script>
	<!-- datatables -->
	<script th:src="@{/js/datatables/datatables.js}"></script>
	<!-- <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js}"></script> -->
	<script th:src="@{/js/datatables/dataTables.buttons.min.js}"></script>
	<script th:src="@{/js/datatables/buttons.flash.min.js}"></script>
	<script th:src="@{/js/datatables/jszip.min.js}"></script>
	<script th:src="@{/js/datatables/pdfmake.min.js}"></script>
	<script th:src="@{/js/datatables/vfs_fonts.js}"></script>
	<script th:src="@{/js/datatables/buttons.html5.min.js}"></script>
	<script th:src="@{/js/datatables/buttons.print.min.js}"></script>
	<!-- fixedHeader -->
	<script th:src="@{/js/datatables/dataTables.fixedHeader.min.js}"></script>
	<!-- dataTables select -->
	<script th:src="@{/js/datatables/dataTables.select.min.js}"></script>
	<!-- dataTables.fixedColumns.min -->
	<script th:src="@{/js/datatables/dataTables.fixedColumns.min.js}"></script>
	<!-- dataTables.rowGroup.min -->
	<script th:src="@{/js/datatables/dataTables.rowGroup.min.js}"></script>
	<!-- custom -->
	<script th:src="@{/js/custom.js}"></script>
</th:block>
</html>